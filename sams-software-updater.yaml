---
sams.software-updater:
  loglevel: ERROR

  backend: sams.backend.SoftwareAccounting
  updater: sams.software.Regexp

sams.backend.SoftwareAccounting:
  file_pattern: 'sa-\d+.db'
  db_path: /local/SoftwareAccounting/

sams.software.Regexp:
  rules:
    - match: '^/usr/'
      software: system
      version: "/usr/"
      versionstr: ""
    - match: '^/(?P<path>s?bin)/'
      software: "system"
      version: "/%(path)s/"
      versionstr: ""
    - match: '^/apps/Hebbe/software/Core/(?P<software>[^/]+)/(?P<version>[^/]+)/'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "Core/%(software)s/%(version)s"
    - match: '^/apps/Hebbe/software/Compiler/(?P<vstr>[^/]+/[^/]+)/(?P<software>[^/]+)/(?P<version>[^/]+)'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "Compiler/%(vstr)s/%(software)s/%(version)s"
    - match: '^/apps/Hebbe/software/MPI/(?P<vstr>[^/]+/[^/]+/[^/]+/[^/]+)/(?P<software>[^/]+)/(?P<version>[^/]+)'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "MPI/%(vstr)s/%(software)s/%(version)s"
    - match: '^/apps/Hebbe/software/MPI/(?P<vstr>[^/]+/[^/]+/[^/]+/[^/]+)/(?P<software>[^/]+)/(?P<version>[^/]+)'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "MPI/%(vstr)s/%(software)s/%(version)s"
    - match: '^/apps/Common/Core/(?P<software>[^/]+)/(?P<version>[^/]+)/'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "Core/%(software)s/%(version)s"
    - match: '^/apps/Common/External/(?P<software>[^/]+)/(?P<version>[^/]+)/'
      software: "%(software)s"
      version: "%(version)s"
      versionstr: "External/%(software)s/%(version)s"
    - match: '^/c3se/apps/Hebbe/MaterialsStudio/MaterialsStudio7.0/'
      software: "MaterialStudio"
      version: "7.0"
      versionstr: ""
    - match: '^/var/singularity/'
      software: "singularity"
      version: ""
      versionstr: ""
    - match: '/c3se/(\w*/)?(?:users|groups)/(.+)/OpenFOAM/(?P<version>[^/]+)/'
      software: "OpenFOAM"
      version: "%(version)s"
      versionstr: ""
      user_provided: true
    - match: '^/c3se/(\w*/)?users/(?P<username>[^/]+)/'
      software: "user"
      version: "%(username)s"
      versionstr: ""
      user_provided: true
    - match: '^/c3se/(\w*/)?users/(?P<username>[^/]+)/'
      software: "user"
      version: "%(username)s"
      versionstr: ""
      user_provided: true
    - match: '^/c3se/(\w*/)?groups/(?P<groupname>[^/]+)/'
      software: "group"
      version: "%(groupname)s"
      versionstr: ""
      user_provided: true
    - match: '^/(\w*/)?priv/(?P<groupname>[^/]+)/'
      software: "group"
      version: "%(groupname)s"
      versionstr: ""
      user_provided: true
    - match: '^/local/tmp.(?P<jobno>[^/]+)/'
      software: "user"
      version: "%(jobno)s"
      versionstr: ""
      user_provided: true

